"0",""
"0","cash <- read_csv(""./data/cbr_com.csv"")"
"0",""
"0","fsl_tracker <- read_csv(""./data/fsl_tracker.csv"")"
"0",""
"0","wash <- read_excel(""./data/ocha_unedited/WASH OCHA2023_feb.xlsx"","
"0","                   sheet = 1) %>% "
"0","  clean_names() %>% "
"0","  rename(admin3pcode = sd_pcode, "
"0","         admin4pcode = com_p_code, "
"0","         admin5pcode = camp_pcode, "
"0","         beneficiaries_in_location = number_benificiaries_in_the_location2, "
"0","         camp_name = camp_asm_almkhym,"
"0","         school_name = schools_asm_lmdrst,"
"0","         collective_shelter_name = collective_shelter_asm_mrkz_alaywa_u_02be,"
"0","         health_facility_name = health_facility_name_asm_almnshat_altbyt, "
"0","         water_system_name = name_of_water_system_asm_mhtt_almyah, "
"0","         partner_code = ip_code,"
"0","         start_date = project_start_date, "
"0","         end_date = project_end_date, "
"0","         quarter = month, "
"0","         month = iincluding_date, "
"0","         project_status = status_alhalt, "
"0","         governorate = gov) %>% "
"0","  mutate(partner_code = ifelse(is.na(partner_code), ngo_code, partner_code), "
"0","         cluster = ""wash"") %>% "
"0","  left_join(locations %>%"
"0","              distinct(admin1pcode, admin2pcode, admin3pcode), "
"0","            by = ""admin3pcode"") %>% "
"0","  rename(construction_water_network = constuction_water_network, "
"0","         fuel_consumption = fule_consumption, "
"0","         construction_water_station = constuction_water_station, "
"0","         cholera_wash_in_health =  cholera_was_hin_health, "
"0","         reporting_month = reporting_month_shhr_altqryr, "
"0","         total_usd = cash_total_money_usd) %>% "
"0","  mutate(total_usd = as.numeric(total_usd))"
"0",""
"0","cccm_names <- c(""admin1pcode"", ""governorate"","
"0","                ""admin2pcode"",""district"",  "
"0","                ""admin3pcode"", ""sub_district"", "
"0","                ""admin4pcode"", ""community"", "
"0","                ""is_2022"", "
"0","                ""jan"", ""feb"", ""mar"", ""apr"", "
"0","                ""may"", ""jun"", ""jul"", ""aug"", "
"0","                ""sep"", ""oct"", ""nov"", ""dec"", "
"0","                ""cumulative"")"
"0",""
"0","cccm <- rbind("
"0","  read_excel("
"0","    ""./data/ocha_unedited/202302_CCCM 4Ws (as of February 2023).xlsx"","
"0","    sheet = ""ISIMM_Assisted_IDPs"","
"0","    skip = 1) %>%"
"0","    setNames(cccm_names) %>% "
"0","    mutate(activity = ""ISIMM""),"
"0","  read_excel("
"0","    ""./data/ocha_unedited/202302_CCCM 4Ws (as of February 2023).xlsx"","
"0","    sheet = ""CCCM_Activities_Assisted_IDPs"","
"0","    skip = 1) %>%"
"0","    setNames(cccm_names) %>% "
"0","    mutate(activity = ""CCCM"")) %>% "
"0","  mutate(jan = as.numeric(jan), "
"0","         feb = as.numeric(feb),"
"0","         cluster = ""CCCM"")"
"0",""
"0","shelter_select <- function(tbl){"
"0","  tbl %>% "
"0","    select(sector, hub, response_modality, "
"0","         # reporting_organisation = implementing_partner_name_or_code, "
"0","         implementing_partner = final_implementing_partner_name_or_code, "
"0","         governorate = governorate_mohafaza, "
"0","         district = district_mantika, "
"0","         sub_district = sub_district_nahya, "
"0","         location, "
"0","         location_type, "
"0","         community = specific_location_name, "
"0","         reporting_month, "
"0","         start_date = activity_start_date_dd_mm_yyyy,"
"0","         end_date = activity_end_date_dd_mm_yyyy,"
"0","         project_status = status, "
"0","         activity, "
"0","         delivery_modality, "
"0","         cash_conditionality,"
"0","         transfer_value = cash_transfer_voucher_value_per_household_usd, "
"0","         cash_delivery_mechanism, "
"0","         beneficiaries = total_number_individuals_reached, "
"0","         families = total_number_of_families_h_hs_reached, "
"0","         admin1pcode = admin1_pcode, "
"0","         admin2pcode = admin2_pcode, "
"0","         admin3pcode = admin3_pcode, "
"0","         admin4pcode = location_pcode,"
"0","         new_beneficiaries = first_round_of_response_type_starting_2023)"
"0","}"
"0",""
"0","snfi <- read_excel(""./data/ocha_unedited/2023_WoS_SNFI_XBHub_4Ws_Jan&Feb2023.xlsx"", "
"0","           sheet = ""Shelter 4Ws"") %>% "
"0","  clean_names() %>% "
"0","  filter(!is.na(sector)) %>%  "
"0","  shelter_select() %>%"
"0","  mutate(sub_cluster = ""shelter"") %>% "
"0","  filter(activity != ""END_OF_FORMULA"") %>%"
"0","  rbind(read_excel(""./data/ocha_unedited/2023_WoS_SNFI_XBHub_4Ws_Jan&Feb2023.xlsx"", "
"0","           sheet = ""NFI 4Ws"") %>% "
"0","          clean_names() %>% "
"0","          filter(!is.na(sector)) %>% "
"0","          shelter_select() %>% "
"0","          mutate(sub_cluster = ""nfi"") %>% "
"0","          filter(activity != ""END_OF_FORMULA"")) %>% "
"0","  mutate(total_usd = transfer_value * families)"
"0",""
"0","health_names <- read_excel(""./data/ocha_unedited/Monthly Health Cluster Indicators Report GZT Jan-Feb 2023.xlsx"", "
"0","           sheet = 1) %>% "
"0","  clean_names() %>% "
"0","  transpose_df() %>% "
"0","  select(rowname) %>% "
"0","  mutate(rowname = str_replace_all(rowname,"
"0","  ""number_of_|for_|supported_|between_levels_of_care_|received_|inside_syria_cross_line_and_cross_border_|inside_syria__cross_line_and_cross_border|attended_by_a_"", """"), "
"0","  rowname = str_replace_all(rowname, ""consultations"", ""cons""), "
"0","  rowname = str_replace_all(rowname, ""rehabilitation_sessions"", ""rehab_sess"")) %>%"
"0","  mutate(rowname = ifelse(nchar(rowname) > 75,"
"0","                          str_sub(rowname, start = 1L, end = 75L), "
"0","                          rowname)) %>%"
"0","  pull(rowname)"
"0",""
"0","health <- read_excel(""./data/ocha_unedited/Monthly Health Cluster Indicators Report GZT Jan-Feb 2023.xlsx"", "
"0","           sheet = 1) %>% "
"0","  setNames(health_names) %>% "
"0","  pivot_longer(cols = "
"0","                 (medical_procedures:"
"0","                    x3_1_6_community_health_workers_trained_re_trained_on_different_health_topi), "
"0","               names_to = ""activity"", "
"0","               values_to = ""beneficiaries"") %>% "
"0","  rename(governorate = location_gov, "
"0","         admin1pcode = code_governorate, "
"0","         district = location_district, "
"0","         admin2pcode = code_district, "
"0","         sub_district = location_sub_district, "
"0","         admin3pcode = code_sub_district, "
"0","         community = location_community, "
"0","         admin4pcode = code_community)"
"0",""
"0","erl <- read_excel(""./data/ocha_unedited/2023-02Feb_ERL_4Ws_NWS - WoS - V03 -WoS Validated.xlsx"", "
"0","           sheet = ""4Ws"") %>% "
"0","  clean_names() %>% "
"0","  rename(admin1pcode = admin1_pcode, "
"0","         admin2pcode = admin2_pcode, "
"0","         admin3pcode = admin3_pcode,"
"0","         admin4pcode = admin4_pcode,"
"0","         partner_code = implementing_partner, "
"0","         beneficiaries = direct_beneficiaries, "
"0","         previously_assisted = have_you_assisted_same_individual_during_previous_month, "
"0","         conditionality = if_cash_cash_conditionality,"
"0","         restrictions = if_cash_cash_restriction, "
"0","         cash_delivery_mechanism = if_cash_cash_delivery_mechanism,"
"0","         transfer_value = if_cash_cash_transfer_voucher_value_per_household_usd, "
"0","         frequency = if_cash_cash_frequency) %>% "
"0","  filter(indicator_unit == ""People"") %>% "
"0","  mutate(total_usd = transfer_value * beneficiaries)"
"0",""
"0","fsl <- read_xlsb(""./data/ocha_edited/FSL_January 2023_5Ws_OCHA_22032023.xlsb"", "
"0","           sheet = ""5Ws Actuals - Jan 2023"") %>% "
"0","  clean_names() %>% "
"0","  rename(admin1pcode = admin1_pcode_do_not_write, "
"0","         admin2pcode = admin2_pcode_do_not_write, "
"0","         admin3pcode = admin3_pcode_do_not_write, "
"0","         admin4pcode = location_pcode_do_not_write, "
"0","         admin5pcode = camp_pcode_do_not_write, "
"0","         transfer_value = value, "
"0","         reported_to_other_sector = has_this_data_been_reported_to_another_sector,"
"0","         beneficiaries = x_of_total_beneficiaries_assisted, "
"0","         families = x_of_families_assisted, "
"0","         start_date = starting_date, "
"0","         end_date = ending_date,"
"0","         delivery_modality = delivery_modality_in_kind_service_cash_voucher, "
"0","         activity = fss_activity_do_not_write, "
"0","         frequency = monthly_frequency) %>% "
"0","  # Crazy -- this is the first time I've seen the 1904 start date"
"0","  mutate_at(vars(start_date, end_date), ~ as.Date(as.numeric(.), origin = ""1904-01-01"")) %>% "
"0","  mutate_at(vars(camp_name_cccm_official_name, "
"0","                 camp_name_if_not_listed_by_the_cccm,"
"0","                 admin5pcode), ~ ifelse(. == """", NA_character_, .)) %>% "
"0","  mutate(camp_name = ifelse(!is.na(camp_name_cccm_official_name), "
"0","                            camp_name_cccm_official_name, "
"0","                            camp_name_if_not_listed_by_the_cccm), "
"0","         total_usd = frequency * transfer_value * families) "
"0",""
"0","edu_names <- read_excel(""./data/ocha_unedited/Gaziantep 4Ws OCHA 2023 EDU.xlsx"", "
"0","           sheet = 5) %>% "
"0","  head(1) %>% "
"0","  transpose_df() %>% "
"0","  select(rowname) %>% "
"0","  mutate(rowname = gsub(""\\p{Arabic}"", """", rowname, perl = TRUE), "
"0","         rowname = str_trim(str_replace_all(rowname, ""\r\n"", """"))) %>% "
"0","  pull(rowname)"
"0",""
"0",""
"0","edu <- read_excel(""./data/ocha_unedited/Gaziantep 4Ws OCHA 2023 EDU.xlsx"", "
"0","           sheet = 5) %>% "
"0","  setNames(edu_names) %>% "
"0","  clean_names() %>% "
"0","  rename(admin1pcode = governorate_pcode, "
"0","         admin2pcode = district_pcode, "
"0","         admin3pcode = sub_district_pcode, "
"0","         admin4pcode = community_pcode, "
"0","         beneficiaries = total_new_individuals, "
"0","         ben_frequencies = total_repeated_beneficiaries_reached, "
"0","         camp_name = if_camp_please_select_the_name_of_the_camp_u_060c, "
"0","         school_name = name_of_school_learning_center, "
"0","         partner_code = implementing_partner_name_or_code)"
"0",""
"0",""
"0","nut <- read_excel(""./data/ocha_unedited/NW Syria Nutrition cluster Jan + Feb 4Ws Dataset-Coded04042023.xlsx"", "
"0","           sheet = 1) %>% "
"0","  clean_names() %>% "
"0","  rename(admin1pcode = gov_pcode, "
"0","         admin2pcode = dis_pcode, "
"0","         admin3pcode = sub_dis_pcode, "
"0","         admin4pcode = com_pcode,"
"0","         partner_code = organisation, "
"0","         camp_name = camp,  "
"0","         health_facility_name = health_facility_or_rrt, "
"0","         transfer_value = cash_transfer_voucher_value_usd) %>% "
"0","  mutate(beneficiaries = male + female, "
"0","         transfer_value = as.numeric(transfer_value), "
"0","         frequency = as.numeric(frequency))"
"0",""
"0",""
"0","prot_names <- read_excel(""./data/ocha_unedited/EXTERNAL_NWS_Complie_5Ws_2023_r1_v1_04042023.xlsx"", "
"0","           sheet = ""Data entry sheet"", "
"0","           skip = 2) %>%"
"0","  head(1) %>% "
"0","  transpose_df() %>%"
"0","  mutate(col_id = row_number()) %>% "
"0","  mutate(rowname = gsub(""\\p{Arabic}"", """", rowname, perl = TRUE), "
"0","         rowname = str_trim(str_replace_all(rowname, ""\r\n|/|\\\\|\\*"", """"))) %>% "
"0","  mutate(rowname = case_when(col_id == 34 ~ ""total_reached"", "
"0","                             col_id == 18 ~ ""unit"", "
"0","                             col_id == 21 ~ ""pwd"","
"0","                             col_id == 22 ~ ""earthquake_response"", "
"0","                             col_id == 16 ~ ""service_delivery"","
"0","                             TRUE ~ rowname)) %>% "
"0","  pull(rowname)"
"0",""
"0","prot <- read_excel(""./data/ocha_unedited/EXTERNAL_NWS_Complie_5Ws_2023_r1_v1_04042023.xlsx"", "
"0","           sheet = ""Data entry sheet"", "
"0","           skip = 2) %>%"
"0","  setNames(prot_names) %>% "
"0","  clean_names() %>% "
"0","  rename(admin1pcode = code_governorate, "
"0","         admin2pcode = code_district, "
"0","         admin3pcode = code_sub_district, "
"0","         admin4pcode = code_commune_village_town, "
"0","         admin5pcode = code_camps, "
"0","         delivery_modality = delivery_modaity, "
"0","         beneficiary_type = type_of_beneficiaries_only_if_unit_number_people, "
"0","         total_achieved_as_per_unit = total_achieved_as_per_the_unit_in_the_previous_field, "
"0","         hrp_project = hrp_project_or_not_yn_u_061f)"
"0",""
