ben_frequencies = sum(beneficiaries, na.rm = TRUE),
communities = n_distinct(admin4pcode)) %>%
arrange(desc(communities)) %>%
flextable() %>%
theme_zebra() %>%
set_caption("Footprint and reach per cluster/WG") %>%
footnote(i = 1, j = 3, inline = TRUE, ref_symbols = "1", part = "header",
as_paragraph("Beneficiary frequencies are the number of times an individual has received assistance, regardless double counting")) %>%
set_table_properties(layout = "autofit", width = .7)
com %>%
# Should water quality testing be included?
filter(project_status %in% c("Completed", "Ongoing") &
activity %out% c("ISIMM")) %>%
group_by(cluster) %>%
summarise(rows = n(),
ben_frequencies = sum(beneficiaries, na.rm = TRUE),
communities = n_distinct(admin4pcode)) %>%
arrange(desc(communities)) %>%
flextable() %>%
theme_zebra() %>%
set_caption("Footprint, reach and rows in combined dataset per cluster/WG") %>%
footnote(i = 1, j = 3, inline = TRUE, ref_symbols = "1", part = "header",
as_paragraph("Beneficiary frequencies are the number of times an individual has received assistance, regardless double counting")) %>%
set_table_properties(layout = "autofit", width = .7)
nut %>% glimpse()
nut %>% filter(!is.na(hub)) %>%
glimpse()
nut %>% count(hub)
fsl %>% glimpse()
fsl %>% count(reporting_month)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
filter(!is.na(total_pop)) %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
filter(total_pop > 0) %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma)
pop %>%
glimpse()
pop %>%
filter(admin3pcode %in% nw_pcode3) %>%
glimpse()
pop %>%
filter(admin3pcode %in% nw_pcode3) %>%
filter(total_pop == 0)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop,
no_pop = ifelse(total_pop == 0,
"unpopulated",
"populated")) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop,
colour = no_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma) +
scale_color_discrete(values = c("red", "black"))
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop,
no_pop = ifelse(total_pop == 0,
"unpopulated",
"populated")) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop,
colour = no_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma) +
scale_colour_manual(values = c("red", "black"))
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop,
no_pop = ifelse(total_pop == 0,
"unpopulated",
"populated")) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop,
colour = no_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma) +
scale_colour_manual(values = c("black", "red"))
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma) +
scale_size_continuous(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma) +
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma, breaks =
c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma) +
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma)
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma,
breaks = c(100, 1000, 10000, 30000, 100000, 200000))
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma,
breaks = c(100, 1000, 10000, 30000, 100000, 200000))
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
{sum(.$beneficiaries, na.rm = TRUE)}
com %>%
filter(!is.na(admin4pcode) & activity != "ISIMM") %>%
group_by(site) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc)) +
geom_histogram() +
scale_x_log10(labels = percent) +
labs(x = "Percent of population covered")
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma,
breaks = c(100, 1000, 10000, 30000, 100000, 200000))
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
group_by(admin4pcode) %>%
summarise(ben_freq = sum(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc)) +
geom_histogram() +
scale_x_log10(labels = percent) +
labs(x = "Percent of population covered")
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = ben_freq / total_pop) %>%
ggplot(aes(x = pc)) +
geom_histogram() +
scale_x_log10(labels = percent) +
labs(x = "Percent of population covered")
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
ggplot(aes(x = pc)) +
geom_histogram() +
scale_x_log10(labels = percent) +
labs(x = "Percent of population covered")
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(pc >= 100)
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = ben_freq)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma,
breaks = c(100, 1000, 10000, 30000, 100000, 200000))
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(total_pop > 0) %>%
ggplot(aes(x = pc, y = beneficiaries)) +
geom_point(aes(size = total_pop),
alpha = .5) +
scale_x_log10(labels = percent) +
scale_y_log10(labels = comma,
breaks = c(0, 10, 100, 300, 1000, 3000, 10000, 30000, 100000)) +
scale_size_continuous(labels = comma,
breaks = c(100, 1000, 10000, 30000, 100000, 200000))
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(pc >= .99)
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(pc >= .99) %>% nrow()
overallocated_communities <- com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(pc >= .99) %>% nrow()
overallocated_communities
com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
ggplot(aes(x = pc)) +
geom_histogram() +
scale_x_log10(labels = percent) +
labs(x = "Percent of population covered")
overallocated_communities <- com %>%
filter(!is.na(admin4pcode) &
activity != "ISIMM" &
project_status %in% c("Completed", "Ongoing")) %>%
group_by(admin4pcode) %>%
slice(which.max(beneficiaries)) %>%
ungroup() %>%
left_join(pop %>% select(admin4pcode, total_pop),
by = "admin4pcode") %>%
mutate(pc = beneficiaries / total_pop) %>%
filter(pc >= .95) %>% nrow()
overallocated_communities
